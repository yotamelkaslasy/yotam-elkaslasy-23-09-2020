(this.webpackJsonpherolo=this.webpackJsonpherolo||[]).push([[0],{26:function(e,t,a){e.exports=a(46)},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(11),c=a.n(l),i=a(8),s=a(1),m=a(4),o=a(15),d=a.n(o),u=a(23),v=a(2),E=a(48),f=a(49),b={amazon:0,ebay:1};function N(){return{data:{fetchCurrencyLoading:!1,fetchCurrencyError:!1,fetchCurrencyErrorMessage:"Server response error",currency:null,list:new Map,listSum:{amazon:0,ebay:0},receivedSum:{amazon:0,ebay:0}},currencyInterval:null,defaultCurrencyInterval:1e4,saveItem:function(e){this.data.list.set(Object(E.a)(),e)},calcAggregatedListSum:function(e){this.data.listSum[e]=Array.from(this.data.list.entries()).filter((function(e){return!Object(v.a)(e,2)[1].isReceived})).filter((function(t){return Object(v.a)(t,2)[1].onlineStore===e})).reduce((function(e,t){return e+Object(v.a)(t,2)[1].price}),0)},calcAggregatedReceivedSum:function(e){this.data.receivedSum[e]=this.receivedItems.filter((function(t){return Object(v.a)(t,2)[1].onlineStore===e})).reduce((function(e,t){return e+Object(v.a)(t,2)[1].price}),0)},markReceived:function(e){this.data.list.get(e).isReceived=!0},onIntervalChange:function(e){this.currencyInterval=e},get receivedItems(){return Array.from(this.data.list.entries()).sort((function(e,t){var a=Object(v.a)(e,2)[1],r=Object(v.a)(t,2)[1];return f.a(new Date(a.deliveryDate),new Date(r.deliveryDate))})).filter((function(e){return Object(v.a)(e,2)[1].isReceived}))},fetchCurrency:function(){var e=this;return Object(u.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.data.fetchCurrencyLoading=!0,t.next=3,fetch("https://api.exchangeratesapi.io/latest?base=USD&symbols=ILS,USD").then((function(t){if(t.status>=400)throw e.data.fetchCurrencyError=!0,e.data.fetchCurrencyLoading=!1,e.fetchCurrencyErrorMessage=t.status+" "+t.statusText||"Server response error",new Error("Server response error.");return t.json()}));case 3:e.data.currency=t.sent,e.data.fetchCurrencyLoading=!1;case 5:case"end":return t.stop()}}),t)})))()}}}var p=Object(r.createContext)(),I=function(e){var t=e.children,a=Object(m.b)(N);return n.a.createElement(p.Provider,{value:a},t)},y=function(){var e=Object(r.useContext)(p);if(!e)throw new Error("useStore must be used within a StoreProvider.");return e},h=a(19);var C=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],l=Object(r.useRef)();Object(r.useEffect)((function(){a&&e()}),Object(h.a)(n)),Object(r.useEffect)((function(){l.current=e}),[e]),Object(r.useEffect)((function(){if(null!==t){var e=setInterval((function(){return l.current()}),t);return function(){return clearInterval(e)}}}),[t].concat(Object(h.a)(n)))},_=(a(33),function(e){var t=e.primary,a=e.onClick,r=e.title,l=e.className,c=e.type,i=void 0===c?"button":c;return n.a.createElement("button",{type:i,className:"Button ".concat(l),onClick:a,style:{background:!t&&"#ccc"}},r)}),g=(a(34),function(e){return e.isLoading?n.a.createElement("div",{className:"LoadingSpinner"},n.a.createElement("div",null),n.a.createElement("div",null)):null}),S=(a(35),Object(m.a)((function(){var e=y();return e.data.fetchCurrencyError?n.a.createElement("div",{className:"FetchCurrencyError"},e.data.fetchCurrencyErrorMessage):null}))),O=a(20),j=(a(36),{name:"",onlineStore:Object.keys(b)[0],price:0,deliveryDate:"",isReceived:!1}),M=Object(m.a)((function(e){var t=e.visible,a=e.closeModalHandler,l=Object(r.createRef)(),c=y(),i=Object(m.b)((function(){return{newItem:Object(O.a)({},j),isFormValid:!1}})),s=function(e){i.newItem[e.target.name]="price"===e.target.name?parseFloat(e.target.value):e.target.value};return t?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"AddItemModal-Backdrop",onClick:a}),n.a.createElement("div",{className:"AddItemModal"},n.a.createElement("div",{className:"AddItemModal__Title"},"Add Item"),n.a.createElement("div",{className:"AddItemModal__Description"},"Fill out the form to add item to list."),n.a.createElement("form",{ref:l,className:"AddItemModal__FormWrap"},n.a.createElement("div",{className:"AddItemModal__FormWrap__FormItem"},n.a.createElement("label",{className:"AddItemModal__FormWrap__FormItem-label",htmlFor:"itemName"},"Item Name"),n.a.createElement("input",{id:"itemName",type:"text",name:"name",value:i.newItem.name,onChange:s,className:"AddItemModal__FormWrap__FormItem-input",required:!0})),n.a.createElement("div",{className:"AddItemModal__FormWrap__FormItem"},n.a.createElement("label",{className:"AddItemModal__FormWrap__FormItem-label",htmlFor:"onlineStore"},"Select a Store"),n.a.createElement("select",{id:"onlineStore",name:"onlineStore",value:i.newItem.onlineStore,className:"AddItemModal__FormWrap__FormItem-select",onChange:function(e){i.newItem.onlineStore=e.target.value}},Object.entries(b).map((function(e){var t=Object(v.a)(e,2),a=t[0],r=t[1];return n.a.createElement("option",{key:"".concat(a,"-").concat(r),value:a},a)})))),n.a.createElement("div",{className:"AddItemModal__FormWrap__FormItem"},n.a.createElement("label",{className:"AddItemModal__FormWrap__FormItem-label",htmlFor:"price"},"Price (USD)"),n.a.createElement("input",{id:"price",type:"number",name:"price",value:i.newItem.price,onChange:s,placeholder:"Price (USD)",className:"AddItemModal__FormWrap__FormItem-input",required:!0})),n.a.createElement("div",{className:"AddItemModal__FormWrap__FormItem"},n.a.createElement("label",{className:"AddItemModal__FormWrap__FormItem-label",htmlFor:"deliveryDate"},"Est. Delivery Date"),n.a.createElement("input",{id:"deliveryDate",type:"date",name:"deliveryDate",value:i.newItem.deliveryDate,onChange:s,placeholder:"EST. Delivery Date",className:"AddItemModal__FormWrap__FormItem-input",required:!0}))),n.a.createElement("div",{className:"AddItemModal__ActionsWrap"},n.a.createElement(_,{primary:!0,title:"Save",className:"AddItemModal__ActionsWrap__SaveButton",onClick:function(){l.current.checkValidity()?(c.saveItem(i.newItem),i.newItem=Object(O.a)({},j),a()):l.current.reportValidity()}}),n.a.createElement(_,{title:"Cancel",onClick:function(){a()}})))):null})),A=function(e){var t=e.onclick;return e.visible?n.a.createElement(_,{primary:!0,title:"Add Item",className:"AddItemModalButton",onClick:t}):null},w=(a(37),Object(m.a)((function(){var e=y(),t=Object(m.b)((function(){return{isModalVisible:!1,selectedTab:"items",selectTab:function(e){t.selectedTab=e},openModal:function(){t.isModalVisible=!0},closeModal:function(){t.isModalVisible=!1}}}));C((function(){e.fetchCurrency()}),e.currencyInterval||e.defaultCurrencyInterval,!0,[e.currencyInterval]),Object(r.useEffect)((function(){e.calcAggregatedListSum("amazon"),e.calcAggregatedListSum("ebay")}));var a="/list"===Object(s.g)().pathname,l="items"===t.selectedTab,c="stores"===t.selectedTab;return n.a.createElement("section",{className:"List"},n.a.createElement("header",{className:"List__Header"},n.a.createElement("ul",null,n.a.createElement("li",{onClick:function(){return t.selectTab("items")},className:"".concat(l?"selected":"")},"Bought items"),n.a.createElement("li",{onClick:function(){return t.selectTab("stores")},className:"".concat(c?"selected":"")},"Stores list"))),l&&n.a.createElement("section",{className:"BoughtItemList"},n.a.createElement("div",{className:"HeaderRow"},n.a.createElement("div",{className:"Col"},"#"),n.a.createElement("div",{className:"Col"},"Item Name"),n.a.createElement("div",{className:"Col"},"Online Store"),n.a.createElement("div",{className:"Col"},"Price (USD)"),n.a.createElement("div",{className:"Col",style:{position:"relative"}},"Price (ILS)"," ",n.a.createElement(g,{isLoading:e.data.fetchCurrencyLoading})),n.a.createElement("div",{className:"Col text-bold"},"Est. Delivery Date"),n.a.createElement("div",{className:"Col"},"Action")),n.a.createElement("div",{className:"List__Interval"},n.a.createElement("label",{htmlFor:"intervalInput",className:"List__Interval-label"},"Interval in Milliseconds"),n.a.createElement("input",{id:"intervalInput",className:"List__Interval-input",type:"number",name:"currencyInterval",min:"100",defaultValue:e.defaultCurrencyInterval,onChange:function(t){e.onIntervalChange(parseInt(t.target.value))},placeholder:"Number of milliseconds"}),"Interval Selected:"," ",e.currencyInterval?e.currencyInterval:e.defaultCurrencyInterval,"ms"),0===e.data.list.size&&n.a.createElement("div",{style:{position:"absolute",top:" 50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center"}},"No items : ( ",n.a.createElement("br",null)," Please add items to the cart via the add button below."),Array.from(e.data.list.entries()).sort((function(e,t){var a=Object(v.a)(e,2)[1],r=Object(v.a)(t,2)[1];return f.a(new Date(a.deliveryDate),new Date(r.deliveryDate))})).map((function(t,a){var r=Object(v.a)(t,2),l=r[0],c=r[1];return n.a.createElement("div",{key:l,className:"Row",style:{display:c.isReceived?"none":"flex"}},n.a.createElement("div",{className:"Col"},a),n.a.createElement("div",{className:"Col"},c.name),n.a.createElement("div",{className:"Col"},c.onlineStore),n.a.createElement("div",{className:"Col"},"$",c.price),n.a.createElement("div",{className:"Col"},"\u20aa",(c.price*e.data.currency.rates.ILS).toFixed(2)),n.a.createElement("div",{className:"Col"},c.deliveryDate),n.a.createElement("div",{className:"Col"},n.a.createElement(_,{title:"Mark Received",primary:!0,onClick:function(){return e.markReceived(l)},className:"MarkReceivedButton"})))}))),c&&n.a.createElement("section",{className:"ReceivedItems"},n.a.createElement("div",{className:"HeaderRow"},n.a.createElement("div",{className:"Col"},"#"),n.a.createElement("div",{className:"Col"},"Store Name"),n.a.createElement("div",{className:"Col"},"Sum")),Object.entries(b).map((function(t,a){var r=Object(v.a)(t,2),l=r[0];r[1];return n.a.createElement("div",{key:l,className:"Row"},n.a.createElement("div",{className:"Col"},a),n.a.createElement("div",{className:"Col"},l),n.a.createElement("div",{className:"Col"},"$",e.data.listSum[l]))}))),n.a.createElement(A,{visible:!t.isModalVisible&&a,onclick:function(){return t.openModal()}}),n.a.createElement(M,{visible:t.isModalVisible,closeModalHandler:t.closeModal}),n.a.createElement(S,null))}))),F=(a(42),Object(m.a)((function(){var e=y(),t=Object(m.b)((function(){return{isModalVisible:!1,selectedTab:"items",selectTab:function(e){t.selectedTab=e}}}));Object(r.useEffect)((function(){e.calcAggregatedReceivedSum("amazon"),e.calcAggregatedReceivedSum("ebay")}));var a="items"===t.selectedTab,l="stores"===t.selectedTab;return n.a.createElement("section",{className:"List"},n.a.createElement("header",{className:"List__Header"},n.a.createElement("ul",null,n.a.createElement("li",{onClick:function(){return t.selectTab("items")},className:"".concat(a?"selected":"")},"Bought items"),n.a.createElement("li",{onClick:function(){return t.selectTab("stores")},className:"".concat(l?"selected":"")},"Stores list"))),a&&n.a.createElement("section",{className:"BoughtItemList"},n.a.createElement("div",{className:"HeaderRow"},n.a.createElement("div",{className:"Col"},"#"),n.a.createElement("div",{className:"Col"},"Item Name"),n.a.createElement("div",{className:"Col"},"Online Store"),n.a.createElement("div",{className:"Col"},"Price (USD)"),n.a.createElement("div",{className:"Col text-bold"},"Est. Delivery Date")),0===e.receivedItems.length&&n.a.createElement("div",{style:{position:"absolute",top:" 50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center"}},"No items : ( ",n.a.createElement("br",null)," Please mark items as received in the items list."),e.receivedItems.map((function(e,t){var a=Object(v.a)(e,2),r=a[0],l=a[1];return n.a.createElement("div",{key:r,className:"Row",style:{display:l.isReceived?"flex":"none"}},n.a.createElement("div",{className:"Col"},t),n.a.createElement("div",{className:"Col"},l.name),n.a.createElement("div",{className:"Col"},l.onlineStore),n.a.createElement("div",{className:"Col"},"$",l.price),n.a.createElement("div",{className:"Col"},l.deliveryDate))}))),l&&n.a.createElement("section",{className:"ReceivedItems"},n.a.createElement("div",{className:"HeaderRow"},n.a.createElement("div",{className:"Col"},"#"),n.a.createElement("div",{className:"Col"},"Store Name"),n.a.createElement("div",{className:"Col"},"Sum")),Object.entries(b).map((function(t,a){var r=Object(v.a)(t,1)[0];return n.a.createElement("div",{key:r,className:"Row"},n.a.createElement("div",{className:"Col"},a),n.a.createElement("div",{className:"Col"},r),n.a.createElement("div",{className:"Col"},"$",e.data.receivedSum[r]))}))))}))),k=(a(43),function(){return n.a.createElement("aside",{className:"Sidebar"},n.a.createElement("nav",null,n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement(i.b,{to:"/list",className:"App-link",activeClassName:"active"},"List")),n.a.createElement("li",null,n.a.createElement(i.b,{to:"/received",className:"App-link",activeClassName:"active"},"Received")))))});a(44);var D=function(){return n.a.createElement(I,null,n.a.createElement(i.a,{basename:"/yotam-elkaslasy-23-09-2020"},n.a.createElement("div",{className:"App"},n.a.createElement(k,null),n.a.createElement("main",{className:"Wrapper"},n.a.createElement(s.d,null,n.a.createElement(s.b,{exact:!0,path:"/"},n.a.createElement(s.a,{to:"/list"})),n.a.createElement(s.b,{exact:!0,path:"/list"},n.a.createElement(w,null)),n.a.createElement(s.b,{exact:!0,path:"/received"},n.a.createElement(F,null)),n.a.createElement(s.b,{path:"*"},n.a.createElement(s.a,{to:"/list"})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(45);c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.7e49bbac.chunk.js.map